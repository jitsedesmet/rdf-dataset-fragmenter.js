@prefix : <http://localhost:3000/mypod/sgv-description> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix ex: <http://example.org/> .
@prefix sgv: <https://thesis.jitsedesmet.be/solution/storage-guidance-vocabulary/#> .
@prefix ldp: <http://www.w3.org/ns/ldp#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ldbc: <http://localhost:3000/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/> .
@prefix dbo: <https://dbpedia.org/ontology> .

<> a ldp:Container, sgv:unstructured-collection ;
    sgv:client-control [
        a sgv:allow-when-not-claimed ;
    ] ;
    sgv:one-file-one-resource "false"^^xsd:boolean .

# An unstructured collection contains a structured collection "posts"
<posts/> a ldp:Container, sgv:structured-collection .
# And we describe that collection...
<posts/> a sgv:canonical-collection ;
    sgv:one-file-one-resource "false"^^xsd:boolean ;
    sgv:save-condition [
        a sgv:always-stored ;
    ] ;
    sgv:update-condition [
        a sgv:update-prefer-static ;
    ] ;
    sgv:resource-description [
        a sgv:shacl-descriptor ;
        sgv:shacl-shape <sgv#postShape> ;
    ] ;
    sgv:group-strategy [
#       Can contain variable mappings, needed to avoid bumping into max length of URI's? -> not needed? Only SGV sees this template and sees it as a string.
        a sgv:group-strategty-uri-template ;
#        TODO: what about wrapped properties?
        sgv:uri-template '{base}/posts/{http%3A%2F%2Flocalhost%3A3000%2Fwww.ldbc.eu%2Fldbc_socialnet%2F1.0%2Fvocabulary%2FcreationDate:10}#{http%3A%2F%2Flocalhost%3A3000%2Fwww.ldbc.eu%2Fldbc_socialnet%2F1.0%2Fvocabulary%2Fid}' ;
    ] .

<sgv#postShape>
    a sh:NodeShape ;
    sh:property [
        sh:path rdfs:type ;
        sh:class ldbc:Post ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path ldbc:creationDate ;
        sh:datatype xsd:dateTime ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path ldbc:id ;
        sh:datatype xsd:long ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] .
